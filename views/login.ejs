
<!DOCTYPE html>
<html lang="en" style='height:100%'>
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>  
        Codemellow
    </title>

  <!-- Bootstrap core CSS -->
  <link href="/library/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">


  <!-- commn css -->
  <link href="/stylesheets/common.css" rel="stylesheet">

  <style type="text/css">


    body{
      font-family: 'Source Sans Pro';
      font-weight: 400;
      background: url('/image/background_image.jpg')  no-repeat center center fixed;
       -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }

    #main_page{
        position: relative;
        z-index:1;
        margin-top:50px;
        color:white;
        /*background-image : url('/image/background_image.jpg');
        background-size: cover;
        height: 100%*/
    }

    #find_password{
      text-align: right;
    }
    #find_password>h5{
      cursor:pointer;
    }
    .log_in_header{
      font-family: "FuturaStd-Medium";
      margin-top: 40px;
      font-size: 42px;
    }
    .log_in_subheader{
      font-family: "Source Sans Pro";
      font-weight: 400;
      font-size: 21px;
      margin-top: 35px;
    }
    .log_in_forget_password{
      font-family: "Source Sans Pro";
      font-weight: 300;
      padding-right: 15px;
      margin-top: 12px;
    }
    #sign_in{
      font-family: "Source Sans Pro";
      font-weight: 600;
    }
    #register{
      font-family: "Source Sans Pro";
      font-weight: 600;
      margin-top: 5px;
    }
    .log_in_li{
      font-family: "Source Sans Pro";
      font-weight: 300;
      font-size: 16px;
    }
    #login_email{
      margin-top: 37px;
    }
    #login_password{
      margin-top: 10px;
    }
    #find_password{
      margin-bottom: 6px;
    }
    #log_in_register_ul{
      margin-top: 40px;

    }
    .login_input_font_class{
      font-family: "Source Sans Pro";
      font-weight: 300;
    }
    .login_input_head_class{
      margin-bottom: 0px;
      font-family: "Source Sans Pro";
      font-weight: 600;
    }
    #information{
      margin-top: 5px;
    }
    .login_register_input{
      margin-bottom: 10px;
    }

  </style>
 </head>

  <body class="bs-docs-home" style='padding-top:50px;height:100%;overflow-y: scroll;overflow-x:hidden'>    
    
  <div id="main_page">
      <div id='main_page_not_login' class='row'>
        <div class="col-sm-4 col-xs-10 col-sm-offset-2 col-xs-offset-1">
          <h1 class="log_in_header">LOG IN</h1>
          <h3 class="log_in_subheader"> Enter your e-mail and password to access My Account </h3>
          <form class="form-horizontal" role="form" onsubmit="return sign_in_check();">
            <div class="login_input_font_class login_register_input form-group" style="margin-bottom:0px;">
              <div class="col-sm-12">
                <input type="email" class="form-control" id="login_email" placeholder="Email Address" name="email">
              </div>
            </div>
            <div class="login_input_font_class form-group">
              
              <div class="col-sm-12">
                <input type="password" class="form-control" id="login_password" placeholder="Password" name="pw">
              </div>
            </div>
            <div id="find_password" class="login_input_font_class form-group">
              <h5 class="log_in_forget_password"><u onclick="find_password()"> Forget your password? </u></h5>
            </div>
            <div class="login_input_font_class form-group">
              <div class="col-sm-12">
                <button id="sign_in" type="submit" class="log_in_sign_in btn btn-success btn-lg full_width">Sign in</button>
              </div>
            </div>
          </form>
        </div>

        <div class="col-sm-4 col-xs-10 col-sm-offset-0 col-xs-offset-1">
          <h1 class="log_in_header">REGISTRATION</h1>
          <h3 class="log_in_subheader"> Register now and make the most of My Account. You will be able to </h3>
          <ul id="log_in_register_ul">
            <li class="log_in_li">
              Receive our exclusive newsletter
            </li>
            <li class="log_in_li">
              Save your favourite products
            </li>
            <li class="log_in_li">
              Shop faster
            </li>
            <li class="log_in_li">
              Check your orders and returns
            </li>
          </ul>
          <br>
          <br>
          <form id="information" class="form-horizontal hidden" role="form">
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <select id="sex" class="form-control">
                  <option>Title</option>
                  <option>Mr.</option>
                  <option>Ms.</option>
                </select>
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <input type="text" class="form-control" id="name" placeholder="Name" name="name">
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <input type="text" class="form-control" id="surname" placeholder="Surname" name="surname">
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <input type="email" class="form-control" id="email" placeholder="Email Address" name="email">
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12 has-error">
                <input type="email" class="form-control" id="confirm_email" placeholder="Confirm E-mail Address">
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <input type="password" class="form-control" id="password" placeholder="Password" name="pw">
              </div>
            </div>
            <div class="progress" style="margin-bottom: 10px;">
              <div id="power_of_password" class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: 1%">
                <span class="sr-only">80% Complete (danger)</span>
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12 has-error">
                <input type="password" class="form-control" id="confirm_password" placeholder="Confirm Password">
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <h5 class="login_input_head_class">Date of Birth</h5>
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-4" style="padding-right: 5px;">
                <select id="date" class="form-control"><option>dd</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select>
              </div>
              <div class="col-sm-4" style="padding-left: 5px;padding-right: 5px;">
                <select id="month" class="form-control"><option>mm</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option></select>
              </div>
              <div class="col-sm-4" style="padding-left: 5px;">
                <select id="year" class="form-control"><option>yyyy</option><option value="2013">2013</option><option value="2012">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option><option value="1991">1991</option><option value="1990">1990</option><option value="1989">1989</option><option value="1988">1988</option><option value="1987">1987</option><option value="1986">1986</option><option value="1985">1985</option><option value="1984">1984</option><option value="1983">1983</option><option value="1982">1982</option><option value="1981">1981</option><option value="1980">1980</option><option value="1979">1979</option><option value="1978">1978</option><option value="1977">1977</option><option value="1976">1976</option><option value="1975">1975</option><option value="1974">1974</option><option value="1973">1973</option><option value="1972">1972</option><option value="1971">1971</option><option value="1970">1970</option><option value="1969">1969</option><option value="1968">1968</option><option value="1967">1967</option><option value="1966">1966</option><option value="1965">1965</option><option value="1964">1964</option><option value="1963">1963</option><option value="1962">1962</option><option value="1961">1961</option><option value="1960">1960</option><option value="1959">1959</option><option value="1958">1958</option><option value="1957">1957</option><option value="1956">1956</option><option value="1955">1955</option><option value="1954">1954</option><option value="1953">1953</option><option value="1952">1952</option><option value="1951">1951</option><option value="1950">1950</option><option value="1949">1949</option><option value="1948">1948</option><option value="1947">1947</option><option value="1946">1946</option><option value="1945">1945</option><option value="1944">1944</option><option value="1943">1943</option><option value="1942">1942</option><option value="1941">1941</option><option value="1940">1940</option><option value="1939">1939</option><option value="1938">1938</option><option value="1937">1937</option><option value="1936">1936</option><option value="1935">1935</option><option value="1934">1934</option><option value="1933">1933</option><option value="1932">1932</option><option value="1931">1931</option><option value="1930">1930</option><option value="1929">1929</option><option value="1928">1928</option><option value="1927">1927</option><option value="1926">1926</option><option value="1925">1925</option><option value="1924">1924</option><option value="1923">1923</option><option value="1922">1922</option><option value="1921">1921</option><option value="1920">1920</option><option value="1919">1919</option><option value="1918">1918</option><option value="1917">1917</option><option value="1916">1916</option><option value="1915">1915</option><option value="1914">1914</option><option value="1913">1913</option><option value="1912">1912</option><option value="1911">1911</option><option value="1910">1910</option><option value="1909">1909</option><option value="1908">1908</option><option value="1907">1907</option><option value="1906">1906</option></select>
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <h5 class="login_input_head_class">Terms of Service and the Privacy Policy</h5>
              </div>
            </div>
            <div class="login_input_font_class login_register_input form-group">
              <div class="col-sm-12">
                <div class="panel panel-default">
                  <div class="panel-body" style="color:black">
                    IF YOU ARE ENTERING INTO THIS AGREEMENT ON BEHALF OF A COMPANY OR OTHER LEGAL ENTITY, YOU REPRESENT THAT YOU HAVE THE AUTHORITY TO BIND SUCH ENTITY, ITS AFFILIATES AND ALL USERS WHO ACCESS OUR SERVICES THROUGH YOUR ACCOUNT TO THESE TERMS AND CONDITIONS, IN WHICH CASE THE TERMS "YOU" OR "YOUR" SHALL REFER TO SUCH ENTITY, ITS AFFILIATES AND USERS ASSOCIATED WITH IT. IF YOU DO NOT HAVE SUCH AUTHORITY, OR IF YOU DO NOT AGREE WITH THESE TERMS AND CONDITIONS, YOU MUST NOT ACCEPT THIS AGREEMENT AND MAY NOT USE THE SERVICES.
                  </div>
                </div>
              </div>
            </div>
          </form>
          <button id="register" type="button" class="btn btn-default btn-lg full_width">Register now</button>
          
          <br>
          <br>
        </div>
      </div>
      <!-- main_page_not_login end -->
  </div>
    

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/library/jquery/jquery-2.1.0.min.js"></script>
    <script src="/library/bootstrap/dist/js/bootstrap.min.js"></script>
    

  </body>

<script type="text/javascript">
var sign_in_check = function(){
  var postobj = {email: $("#login_email").val(), pw: $("#login_password").val()}
  if(postobj.email && postobj.pw && postobj.email!="" && postobj.pw!=""){
    $.post("/main_login", postobj, function(result){
      console.log(result)
      if(result.result){
          location.href='/dev';
      }else{
        alert("login fail");
      }
    })  
  }
  return false;
}

$("#sign_in").on('click', sign_in_check);

$("#login_email").keyup(function(e){
  if(e.keyCode==13){
    sign_in_check();
  }
});
$("#login_password").keyup(function(e){
  if(e.keyCode==13){
    sign_in_check();
  }
});

$("#password").keyup(function(){
  var passwd = $(this).val();
  var score = 0;
  var email_regex = new RegExp($("#email").val().substr(0, $("#email").val().indexOf('@')),"i");
  if(passwd.search(email_regex) == -1 && passwd.indexOf($("#surname").val()) == -1)
    score += 25;
  if(/[!@#]+/.test(passwd)) score += 25;
  if(/[0-9a-z]+/.test(passwd)) score += 25;
  if(passwd.length >= 8) score += 25;
  $(this).parent().addClass("has-success");
  $(this).parent().removeClass("has-error");
  if(score <= 50){
    $("#power_of_password").removeClass("progress-bar-warning")
    $("#power_of_password").removeClass("progress-bar-success")
    $("#power_of_password").addClass("progress-bar-danger")
    $(this).parent().addClass("has-error");
    $(this).parent().removeClass("has-success");
  }else if(score <= 75){
    $("#power_of_password").addClass("progress-bar-warning")
    $("#power_of_password").removeClass("progress-bar-success")
    $("#power_of_password").removeClass("progress-bar-danger")
  }else{
    $("#power_of_password").removeClass("progress-bar-warning")
    $("#power_of_password").addClass("progress-bar-success")
    $("#power_of_password").removeClass("progress-bar-danger")
  }
  $("#power_of_password").attr('aria-valuenow', score);
  $("#power_of_password").attr('aria-valuenow', score);
  $("#power_of_password").css('width', score+"%");
  
})
$("#confirm_password").keyup(function(){
  var pw = $(this).val();
  if(/[!@#]+/.test(pw)&& /[0-9a-z]+/.test(pw) && pw.length >= 8 && $("#password").val() == pw){
    $(this).parent().addClass("has-success");
    $(this).parent().removeClass("has-error");
  }else{ /*has-warning */
    $(this).parent().addClass("has-error");
    $(this).parent().removeClass("has-success");
  }
})
$("#find_password_email").keydown(function(e){
  if(e.keyCode == 13){
    $("#find_password_button").trigger("click");
  }
})
$("#find_password_button").on('click', function(){
  global_loading_start();
  var email = $("#find_password_email").val();
  $.post("/find_password", {email: email}, function(result){
    global_loading_end();
    alert(result.result);
  })
})

$("#register").on('click', function(){
  if($("#information").hasClass("hidden")){
    $("#information").removeClass("hidden");
  }else{
    console.log('register verify start');
    var birth = {date: $("#date>option:selected").val(), month:$("#month>option:selected"), year: $("#year>option:selected").val()}
    if($("#sex>option:selected").val()=="Title"){
      $("#sex").focus(); return;
    }
    if(birth.date == "dd" && birth.month == "mm" && birth.year == "yyyy"){
      $("#date").focus(); return;
    }else{
      birth = birth.year + "-" + birth.month + "-" + birth.date;
    }
    if($("#information>div>div.has-error").length == 0 
      && $("#information>div>div.has-success").length == 6){
      global_loading_start();
      var postobj = {
        sex: $("#sex>option:selected").val(),
        name: $("#name").val(),
        surname: $("#surname").val(),
        email: $("#email").val(),
        pw: $("#password").val(),
        type: $("[name=optionsRadios]:checked").val(),
        birth: birth
      }
      $.post("/join", postobj, function(result){
        global_loading_end();
        if(result.err){
          alert(const_err_msg[result.msg]);
        }else{
          location.href = "/market/verification";
        }
      })
    }else{
      if($("#information>div>div.has-error").length == 0){
        alert("Please fill blank")  
      }else{
        $("#information>div>div.has-error")[0].focus(); 
      }
      return;
    }
  }
  
})
$("#name").focusout(function(){
  if(/^[A-Za-z\s]*$/g.test($(this).val())){
    $(this).parent().addClass("has-success");
    $(this).parent().removeClass("has-error");
  }else{ /*has-warning */
    $(this).parent().addClass("has-error");
    $(this).parent().removeClass("has-success");
  }
})
$("#surname").focusout(function(){
  if(/^[A-Za-z\s]*$/g.test($(this).val())){
    $(this).parent().addClass("has-success");
    $(this).parent().removeClass("has-error");
  }else{ /*has-warning */
    $(this).parent().addClass("has-error");
    $(this).parent().removeClass("has-success");
  }
})
$("#email").focusout(function(){
  var self = $(this);
  if(/^([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}$/.test($(this).val())){
    $.post("/duplicate_check", {email: self.val()}, function(result){
      //console.log(result);
      if(result){
        self.parent().addClass("has-success");
        self.parent().removeClass("has-error");
      }else{
        self.parent().addClass("has-error");
        self.parent().removeClass("has-success");
        self.val("duplicated")
      }
    });
  }else{ /*has-warning */
    self.parent().addClass("has-error");
    self.parent().removeClass("has-success");
  }
})
$("#confirm_email").focusout(function(){
  if(/^([0-9a-zA-Z]+[-._+&amp;])*[0-9a-zA-Z]+@([-0-9a-zA-Z]+[.])+[a-zA-Z]{2,6}$/.test($(this).val())
    && $(this).val()==$("#email").val()){
    $(this).parent().addClass("has-success");
    $(this).parent().removeClass("has-error");
  }else{ /*has-warning */
    $(this).parent().addClass("has-error");
    $(this).parent().removeClass("has-success");
  }
})

</script>

</html>


